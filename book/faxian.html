<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <link rel="stylesheet" type="text/css" href="../css/aui.2.0.css" />
    <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css" />
    <style type="text/css">
     #main {padding-top:15px;}
      #main .aui-list::after, #main .aui-list::before, #main .aui-list-item::after, #main .aui-list-item::before { height: 0;}
      #main .aui-list.aui-list-in .aui-list-item-inner::after { background-color: #f5f6f7;} 
      #header {position: fixed;left: 0;right: 0;}
    </style>
</head>
<body>
<header class="aui-bar aui-bar-nav" id="header">
	<a class="aui-pull-left aui-btn" tapmode onclick="erweima()">
        <span class="fa fa-fw fa-qrcode"></span>
    </a>
    <div class="aui-title">发现</div>
    <a class="aui-pull-right aui-btn" tapmode onclick="opensearch()">
        <span class="aui-iconfont aui-icon-search"></span>
    </a>
</header>
<div id="main">
     <ul class="aui-list aui-list-in">
        <li class="aui-list-item" tapmode onclick="openframe('paihang')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-trophy fa-lg fa-fw aui-text-danger"></i>排行榜</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default">排行榜数据</div>
               </div>
           </div>
        </li>

        <li class="aui-list-item aui-margin-t-15" tapmode onclick="openframe('spgc')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-language fa-lg fa-fw aui-text-primary"></i>书评广场</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default">大神驾到</div>
               </div>
           </div>
        </li>
        <li class="aui-list-item" tapmode onclick="openframe('zhuanti')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-list-alt fa-lg fa-fw aui-text-success"></i>专题</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default">为你盘点热门</div>
               </div>
           </div>
        </li>

        <li class="aui-list-item aui-margin-t-15" tapmode onclick="openframe('vip')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-gg fa-lg fa-fw aui-text-warning"></i>VIP专区</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default">会员专享福利</div>
               </div>
           </div>
        </li>
        <li class="aui-list-item" tapmode onclick="openframe('free')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-percent fa-lg fa-fw aui-text-danger"></i>免费专区</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default">免费也有好书</div>
               </div>
           </div>
        </li>
        <li class="aui-list-item" tapmode onclick="openframe('authorlist')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-user fa-lg fa-fw aui-text-primary"></i>名人堂</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default">名人名作值得读哦</div>
               </div>
           </div>
        </li>
        
        <li class="aui-list-item aui-margin-t-15" tapmode onclick="openframe('update')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-warning fa-lg fa-fw aui-text-warning"></i>检测新版</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default"><span class="fa" id="hasupdate">升级到最新版</span></div>
               </div>
           </div>
        </li>
        <li class="aui-list-item" tapmode onclick="openwebpage('http://demo.jameson512.com/forum.php?mobile=2','西风工作室')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-cloud fa-lg fa-fw aui-text-primary"></i>打开论坛</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default">西风工作室论坛</div>
               </div>
           </div>
        </li>
        <li class="aui-list-item" tapmode onclick="openframe('about')">
           <div class="aui-list-item-inner aui-list-item-arrow">
               <div class="aui-list-item-title"><i class="fa fa-info fa-lg fa-fw aui-text-danger"></i>关于我们</div>
               <div class="aui-list-item-right">
                   <div class="aui-text-default"></div>
               </div>
           </div>
        </li>
    </ul>
</div>
<div class="aui-tips aui-margin-b-15 aui-hide" id="nonetwork" style="position:fixed;bottom:50px;left: 0;right:0;z-index: 9999;">
    <i class="aui-iconfont aui-icon-info"></i>
    <div class="aui-tips-title">当前没有网络连接</div>
    <i class="aui-iconfont aui-icon-close" tapmode onclick="closeTips()"></i>
</div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
var indexSetting = $api.getStorage('appinfo');
indexSetting.userinfo = $api.getStorage('userinfo');
apiready = function(){
  $api.fixStatusBar( $api.dom('header') );
  api.parseTapmode();
  $api.css($api.byId('main'),'margin-top:'+$api.offset($api.dom('header')).h+'px');
  indexSetting.oldversion = api.appVersion;
  api.addEventListener({
    name:'offline'
  }, function(ret, err){        
    $api.removeCls($api.byId('nonetwork'),'aui-hide');
  });
  api.addEventListener({
    name:'online'
  }, function(ret, err){
    closeTips();
  });
  if(api.connectionType == 'none'){
      api.toast({
          msg: '没有网络',
          duration: 2000,
          location: 'top'
      });
      $api.removeCls($api.byId('nonetwork'),'aui-hide');
  }else{
    api.setRefreshHeaderInfo({
        visible: true,
        bgColor: '#ccc',
        textColor: '#fff',
        textDown: '下拉刷新...',
        textUp: '松开刷新...',
        showTime: true
    }, function(ret, err) {
        ajaxuser();
    	  initload();
        indexSetting.userinfo = $api.getStorage('userinfo');
        api.refreshHeaderLoadDone()
    });
  }
};

function closeTips(){
  $api.addCls($api.byId('nonetwork'),'aui-hide')
}
function initload(){
	api.ajax({
	    url: indexSetting.url+'api.php?appkey='+indexSetting.appkey+'&type=get&module=updateversion&param=version----'+indexSetting.oldversion,
	    method: 'get'
	}, function(ret, err) {
	    if (ret.status) {
	  		$api.addCls($api.byId('hasupdate'), 'fa-circle');
	  		$api.addCls($api.byId('hasupdate'), 'aui-text-danger');
	    }
	});
}
function openframe(name){
  api.openWin({
      name: name,
      url: './'+name+'.html',
      rect: {
          x: 0,
          y: 0,
          w: api.winWidth,
          h: api.winHeight
      },
      bgColor:"#F5F5F5",
      reload:true,
      bounces: false,
      vScrollBarEnabled: true,
      hScrollBarEnabled: false,
      animation:{
        type:"push",
        subType:"from_right",
        duration:300
      }
  });
}
</script>
</html>